<!doctype html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
            <meta name="viewport" content="width=device-width, maximum-scale=2, minimum-scale=1, user-scalable=no">
                <title>首页</title>
                <style type="text/css">
                    *{
                        margin:0;
                        padding: 0;
                    }
                body,html{
                    height: 100%;
                    width: 100%;
                }
                section{
                    height: 100%;
                    width: 100%;
                    text-align:center;
                }
                .div{
                    float: left;
                    position: relative;
                    left: 50%;
                    top: 30%;
                    margin-left: -113px;
                    margin-top: -20px;
                }
                </style>
                
                <script id="worker1" type="javascript/worker">
                    // This script won't be parsed by JS engines because its type is javascript/worker.
                    self.onmessage = function(e) {
                        
                        window.webkit.messageHandlers.jsCallOC.postMessage('[[[ ]]]');
                        self.postMessage('msg from worker');
                    };
                // Rest of your worker code goes here.
                    </script>
                

    
                <script>
                    // $解析器
                    function $ (ele) {
                        return document.querySelector(ele);
                    };
                
                // 点击确定按钮
                function onClickButton() {
                    // 复杂数据
                    var list = [1,2,3];
                    var dict = {"name":"阳君", "qq":"937447974", "data":input.value, "list":list};
<!--                    alert(dict);-->
<!--                    -->
<!--                    // JS通知WKWebView-->
<!--                    window.webkit.messageHandlers.jsCallOC.postMessage(dict);-->


var blob = new Blob([document.querySelector('#worker1').textContent], { type: "text/javascript" })

// Note: window.webkitURL.createObjectURL() in Chrome 10+.
var worker = new Worker(window.URL.createObjectURL(blob));

worker.onmessage = function(e) {
    console.log("Received: " + e.data);
    alert(e.data);
}
worker.postMessage("hello"); // Start the worker.

                }
                
                // WKWebView调用JS
                function ocCallJS(params) {
                    show.innerHTML = params;
                }
                
                // alert对话框
                function ale() {
                    alert("这是一个警告对话框！");
                }
                
                // confirm选择框
                function firm() {
                    if(confirm("去百度看看？")) {
                        alert("你选择了去！");
                    } else {
                        alert("你选择了不去！");
                    }
                }
                
                // prompt输入框
                function prom() {
                    var result = prompt("演示一个带输入的对话框", "这里输入你的信息");
                    if(result) {
                        alert("谢谢使用，你输入的是：" + result)
                    }
                }
var w;
                function startWorker()
                {
                    
                    if(typeof(Worker)!=="undefined")
                    {
                        if(typeof(w)=="undefined")
                        {
                            alert('defined worker 22');
                            w=new Worker("./demo_workers.js");
                            alert(w);
                        }
                        
                        w=new Worker("./demo_workers.js");
                        alert(w);
                        w.onmessage = function (event) {
                            alert(event.data);
                        };
                    }
                    else
                    {
                        alert("Sorry, your browser does not support Web Workers...");
                    }
                }
                
                function stopWorker()
                {
                    w.terminate();
                }
                
                
                </script>
    </head>
    
    <body >
        <section>
            <div class="div">
                <a style="margin-left:10px;width:250px;line-height:30px;display:inline-block;background-color:blue;color:#fff;text-align:center;" id="callAppButton" >CallApp</a>
                <br>
                
                
                <input type="text" id="input" style="width:150px;line-height:30px">
                    <a style="margin-left:10px;width:50px;line-height:30px;display:inline-block;background-color:blue;color:#fff;text-align:center;" id="button" >确定</a>
                    <br>
                    <span id="show" style="display:inline-block;width:100%;text-align:left;font-size:18px;font-family:'微软雅黑';color:#000;margin-top:20px;" ></span>
                    <br><br>
                    <input type="submit" value="警告框" onclick="ale()" />
                    <input type="submit" value="选择框" style="margin-left:20px;" onclick="firm()" />
                    <input type="submit" value="输入框" style="margin-left:20px;" onclick="prom()" />
                    </div>
        </section>
        <script type="text/javascript">
            // 界面渲染完毕执行
            var input = $('#input'),
            button = $('#button'),
            show = $('#show');
            // 按钮监听
            button.addEventListener('click', onClickButton);
            
            $('#callAppButton').addEventListener('click', onClickButton);
            
            </script>
        

    </body>
</html>

